library(ggplot2)
library(dplyr)
tableau_data <- read.csv("~/Downloads/Cohort_Summary_data.csv", sep='\t', fileEncoding = "UCS-2LE")
unique_PT_ID <- unique(tableau_data$PT.ID)
unique_PT_ID <- unique_PT_ID[unique_PT_ID != "null"]
diagnosed_table <- tableau_data[tableau_data$Diagnosis != "",]
table_diagnosis <- as.data.frame(table(unique(diagnosed_table[c("PT.ID", "Diagnosis")])$Diagnosis))
table_diagnosis <- table_diagnosis[-1,]
cbbPalette <- c("#E69F00", "#56B4E9", "#009E73", "#F0E442", "#0072B2", "#D55E00", "#CC79A7",  "#00CC33",  "#FF0033",  "#660099")
mapped_occurences <- tail(sort(table_diagnosis$Freq), 10)
mapped_occurences <- data.frame(Freq=mapped_occurences, color=1:10)
mapped_occurences$pallet <- cbbPalette
table_diagnosis <- merge(table_diagnosis, mapped_occurences, by="Freq", all = TRUE)
table_diagnosis[is.na(table_diagnosis)] <- 0
table_diagnosis$pallet <- ifelse(table_diagnosis$color == 0, "#000000", table_diagnosis$pallet)
table_diagnosis$color <- as.factor(table_diagnosis$color)
table_diagnosis <- table_diagnosis[order(table_diagnosis$Var1),]
p<- ggplot(data=table_diagnosis, aes(x=Var1, y=Freq, fill=color)) +
geom_col() +
scale_y_continuous(limits = c(0,max(table_diagnosis$Freq)), expand = c(0, 0)) +
theme_bw() +
scale_fill_manual(values=append(cbbPalette, "#000000", 0)) +
theme(panel.grid = element_blank(),
panel.border = element_blank(),
axis.text.x = element_text(angle=90, hjust=1, vjust=0.5, colour = table_diagnosis$pallet))
p
# Next figure
tableau_data <- read.csv("~/Downloads/Cohort_Summary_data.csv", sep='\t', fileEncoding = "UCS-2LE")
tableau_data <- read.csv("data/Cohort_Summary_data.csv", sep='\t', fileEncoding = "UCS-2LE")
tableau_data <- read.csv("data/Cohort_Summary_data.csv", sep='\t', fileEncoding = "UCS-2LE")
tableau_data <- read.csv("data/Cohort_Summary_data.csv", sep='\t', fileEncoding = "UCS-2LE")
pwd
!pwd
tableau_data <- read.csv("data/Cohort_Summary_data.csv", sep='\t', fileEncoding = "UCS-2LE")
"data/Cohort_Summary_data.csv"
tableau_data <- read.csv("data/Cohort_Summary_data.csv", sep='\t', fileEncoding = "UCS-2LE")
